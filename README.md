# mood-based-playlist-generator
//Developed a mood-responsive music recommendation tool by integrating Spotify‚Äôs API to fetch playlists dynamically  based on user mood input.
//Author-Nakul Jindal

# -*- coding: utf-8 -*-
"""Untitled12.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1ZaNRIuI3-6waUbAtyga50KduP-CHuwBH
"""

pip install requests spotipy opencv-python numpy tensorflow keras flask

pip install python-dotenv requests

import requests
import base64

# Manually enter your Spotify API credentials here
CLIENT_ID = "58ba7fc0f5154534a53484a7dffebdab"
CLIENT_SECRET = "31e4d4196ff749f3acf1e53dc45bae1f"

# Function to get access token
def get_token():
    auth_string = f"{CLIENT_ID}:{CLIENT_SECRET}"
    auth_bytes = auth_string.encode("utf-8")
    auth_base64 = base64.b64encode(auth_bytes).decode("utf-8")

    url = "https://accounts.spotify.com/api/token"
    headers = {
        "Authorization": f"Basic {auth_base64}",
        "Content-Type": "application/x-www-form-urlencoded"
    }
    data = {"grant_type": "client_credentials"}

    response = requests.post(url, headers=headers, data=data)

    if response.status_code == 200:
        return response.json().get("access_token")
    else:
        print("‚ùå Error fetching token:", response.json())
        return None

# Test the function in Colab
token = get_token()
print("‚úÖ Access Token:", token)

# Function to fetch playlists based on mood
def search_playlist(mood):
    token = get_token()  # Get the latest access token
    if not token:
        print("‚ùå Unable to fetch access token. Exiting.")
        return

    url = f"https://api.spotify.com/v1/search?q={mood}&type=playlist&limit=5"
    headers = {"Authorization": f"Bearer {token}"}

    response = requests.get(url, headers=headers)

    if response.status_code == 200:
        playlists = response.json().get("playlists", {}).get("items", [])
        if playlists:
            print(f"\nüéµ Playlists for mood: {mood.capitalize()}")
            for p in playlists:
                # Check if the keys exist before accessing them
                if p and "name" in p and "external_urls" in p and "spotify" in p["external_urls"]:
                    print(f"- {p['name']} | üîó {p['external_urls']['spotify']}")
                else:
                    print(f"- Playlist data missing some fields: {p}")  # Print the incomplete data for debugging
        else:
            print("No playlists found.")
    else:
        print("‚ùå Error fetching playlists:", response.json())

# Test the function in Colab
search_playlist("Happy")  # Try "sad", "relaxing", "focus", etc.ocus", etc.

pip install opencv-python deepface numpy

import cv2
from deepface import DeepFace

# Function to detect emotion from webcam
def detect_emotion():
    cap = cv2.VideoCapture(0)  # Open webcam
    ret, frame = cap.read()
    cap.release()

    if not ret:
        print("‚ùå Error: Unable to capture image from webcam.")
        return None

    # Analyze emotion using DeepFace
    result = DeepFace.analyze(frame, actions=['emotion'], enforce_detection=False)
    emotion = result[0]['dominant_emotion']

    print(f"\nüé≠ Detected Emotion: {emotion.capitalize()}")
    return emotion

# Test Emotion Detection
detect_emotion()
